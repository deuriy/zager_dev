/*! For license information please see commons.js.LICENSE.txt */
(self.webpackChunkwcBraintree_name_=self.webpackChunkwcBraintree_name_||[]).push([[351],{7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},2858:function(e){e.exports=function(e){if(Array.isArray(e))return e}},3646:function(e,t,n){var r=n(7228);e.exports=function(e){if(Array.isArray(e))return r(e)}},1506:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},8926:function(e){function t(e,t,n,r,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(a,o){var i=e.apply(n,r);function c(e){t(i,a,o,c,u,"next",e)}function u(e){t(i,a,o,c,u,"throw",e)}c(void 0)}))}}},4575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},9100:function(e,t,n){var r=n(9489),a=n(7067);function o(t,n,i){return a()?e.exports=o=Reflect.construct:e.exports=o=function(e,t,n){var a=[null];a.push.apply(a,t);var o=new(Function.bind.apply(e,a));return n&&r(o,n.prototype),o},o.apply(null,arguments)}e.exports=o},3913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7154:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t},9754:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},2205:function(e,t,n){var r=n(9489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},430:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},7067:function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},6860:function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},3884:function(e){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},8206:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},6479:function(e,t,n){var r=n(7316);e.exports=function(e,t){if(null==e)return{};var n,a,o=r(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},7316:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}},8585:function(e,t,n){var r=n(8),a=n(1506);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?a(e):t}},9489:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},3038:function(e,t,n){var r=n(2858),a=n(3884),o=n(379),i=n(521);e.exports=function(e,t){return r(e)||a(e,t)||o(e,t)||i()}},319:function(e,t,n){var r=n(3646),a=n(6860),o=n(379),i=n(8206);e.exports=function(e){return r(e)||a(e)||o(e)||i()}},8:function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t},379:function(e,t,n){var r=n(7228);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},5957:function(e,t,n){var r=n(9754),a=n(9489),o=n(430),i=n(9100);function c(t){var n="function"==typeof Map?new Map:void 0;return e.exports=c=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return i(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)},c(t)}e.exports=c},2266:function(e,t,n){var r=n(3027),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(4575)),i=a(n(3913)),c=a(n(2205)),u=a(n(8585)),l=a(n(9754));var s=function(e){(0,c.default)(s,e);var t,n,a=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);if(n){var a=(0,l.default)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,u.default)(this,e)});function s(e){var t;return(0,o.default)(this,s),(t=a.call(this,e)).state={hasError:!1,error:null,errorInfo:null},t}return(0,i.default)(s,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.hasError?r.createElement(r.Fragment,null,this.state.error&&r.createElement("div",{className:"wc-braintree-blocks__error"},this.state.error.toString()),this.state.errorInfo&&r.createElement("div",{className:"wc-braintree-blocks__error"},this.state.errorInfo.componentStack)):this.props.children}}]),s}(n(3027).Component);t.default=s},6723:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(9215);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var a=n(9448);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}));var o=n(7739);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}));var i=n(9548);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}))},9215:function(e,t,n){var r=n(3027),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Notice=void 0;var o=a(n(7154)),i=a(n(4184)),c=n(7997),u=function(e){var t=e.notice,n=e.onRemove,a=(0,i.default)("wc-braintree-blocks__notice ".concat(t.type));return r.createElement(c.Notice,(0,o.default)({key:"notice-".concat(t.type),className:a,onRemove:function(){t.isDismissible&&n()}},t),t.message)};t.Notice=u;var l=u;t.default=l},7739:function(e,t,n){var r=n(3027);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PaymentMethodLabel=void 0;var a=function(e){var t=e.title,n=(e.paymentMethod,e.components),a=e.icon,o=void 0===a?[]:a,i=n.PaymentMethodLabel,c=n.PaymentMethodIcons;return Array.isArray(o)||(o=[o]),r.createElement("span",{className:"wc-braintree-blocks-paymentMethod__label"},r.createElement(i,{text:t}),r.createElement(c,{icons:o,align:"left"}))};t.PaymentMethodLabel=a;var o=a;t.default=o},9448:function(e,t,n){var r=n(3027),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PaymentMethod=void 0;var o=a(n(7154)),i=a(n(3038)),c=a(n(6479)),u=n(3027),l=n(89),s=n(3636),d=function(e){var t=e.content,n=e.description,a=void 0===n?"":n,s=(e.icons,(0,c.default)(e,["content","description","icons"])),d=(0,u.useRef)(),f=(0,u.useState)(null),m=(0,i.default)(f,2),v=m[0],y=m[1],g=t;return(0,u.useEffect)((function(){d.current&&y(d.current)}),[]),r.createElement("div",{ref:d,className:"wc-braintree-blocks-payment-method__container"},a&&r.createElement("div",{className:"wc-braintree-blocks-payment-method__description"},a),r.createElement(l.PaymentMethodDataProvider,(0,o.default)({container:v},s),r.createElement(p,s,r.createElement(g,s))))};t.PaymentMethod=d;var p=function(e){var t=e.children,n=e.name,r=e.billing,a=e.shippingData,o=e.eventRegistration,i=e.emitResponse,c=e.activePaymentMethod,u=e.isExpress,l=void 0!==u&&u,d=e.advancedFraudOptions,p=void 0===d?{}:d,f=o.onPaymentProcessing,m=o.onCheckoutAfterProcessingWithError,v=i.responseTypes,y=i.noticeContexts;return(0,s.useProcessPayment)({onPaymentProcessing:f,responseTypes:v,name:n,billing:r,shippingData:a,activePaymentMethod:c,advancedFraudOptions:p}),(0,s.useProcessPaymentFailure)({event:m,responseTypes:v,messageContext:l?y.EXPRESS_PAYMENTS:null}),t},f=d;t.default=f},9548:function(e,t,n){var r=n(3027),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SavedTokenComponent=t.SavedTokenProvider=void 0;var o=a(n(7015)),i=a(n(8926)),c=a(n(9713)),u=n(3027),l=n(9154),s=n(3636),d=a(n(7606)),p=n(89);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.SavedTokenProvider=function(e){return r.createElement(p.PaymentMethodDataProvider,m({},e),r.createElement(v,m({},e)))};var v=function(e){var t=e.name,n=e.vaultedThreeDSecure,r=void 0!==n&&n,a=e.token,f=e.eventRegistration,v=e.billing,y=e.shippingData,g=e.emitResponse.responseTypes,b=f.onPaymentProcessing,h=f.onCheckoutAfterProcessingWithError,P=(0,u.useRef)({billing:v,shippingData:y}),O=(0,p.usePaymentMethodDataContext)().doPaymentDataFilter;(0,s.useDeviceData)(),(0,s.useThreeDSecure)(r),(0,s.useProcessPaymentFailure)({event:h,responseTypes:g}),(0,u.useEffect)((function(){P.current={name:t,billing:v,shippingData:y}}));var S=(0,u.useCallback)(function(){var e=(0,i.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.default)({path:"/wc-braintree/v1/3ds/vaulted_nonce",method:"POST",data:{token_id:t,version:2}});case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[]);return(0,u.useEffect)((function(){var e=b((0,i.default)(o.default.mark((function e(){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=16;break}return e.prev=1,e.next=4,S(a);case 4:if((n=e.sent).success){e.next=7;break}throw new l.BraintreeError({message:n.message});case 7:return e.next=9,O({meta:{paymentMethodData:(0,c.default)({},"".concat(t,"_3ds_nonce_key"),"true")}},m(m({},P.current),{result:n.data}));case 9:return n=e.sent,e.abrupt("return",(0,l.ensureSuccessResponse)(g,n));case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",(0,l.ensureErrorResponse)(g,e.t0));case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))));return function(){return e()}}),[b,r,a,t,g]),null};t.SavedTokenComponent=v;var y=v;t.default=y},4142:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1990);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var a=n(703);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}))},1990:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useCreatePaymentRequest=void 0;var a=r(n(319)),o=n(3027),i=n(9154),c=n(2338),u=function(e){var t=e.applePayInstance,n=e.billing,r=e.shippingData,u=e.getData,l=(0,o.useRef)({});return(0,o.useEffect)((function(){l.current.billing=n,l.current.shippingData=r}),[n,r]),(0,o.useMemo)((function(){if(t){var e=l.current.billing,n=e.cartTotal,r=e.currency,o=e.cartTotalItems,s=e.billingData,d=l.current.shippingData,p=d.needsShipping,f=d.shippingRates,m={total:{label:u("displayName"),type:"final",amount:(0,i.removeNumberPrecision)(n.value,r.minorUnit).toString()},lineItems:(0,c.formatLineItems)(o,r.minorUnit),currencyCode:r.code,countryCode:u("countryCode"),requiredBillingContactFields:["postalAddress"],requiredShippingContactFields:(v=p?["postalAddress"]:[],s.email||(v=[].concat((0,a.default)(v),["email"])),s.phone||(v=[].concat((0,a.default)(v),["phone"])),v)};return p&&(m.shippingMethods=(0,c.formatShippingMethods)(f)),t.createPaymentRequest(m)}var v;return null}),[t])};t.useCreatePaymentRequest=u;var l=u;t.default=l},703:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useCreateSession=void 0;var a=r(n(319)),o=r(n(9713)),i=n(3027),c=n(3163),u=n(3804),l=n(89),s=n(3636),d=r(n(7606)),p=n(2338),f=n(9154);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t=e.applePayInstance,n=e.billing,r=e.shippingData,o=e.paymentRequest,m=e.eventRegistration,g=e.onClick,b=e.getData,h=(0,s.usePaymentEventsHandler)({billing:n,shippingData:r,eventRegistration:m}).addShippingHandler,P=(0,l.usePaymentMethodDataContext)(),O=P.setPaymentMethodNonce,S=P.onPaymentDataFilter,_=P.notice.addNotice,E=(0,i.useRef)({}),D=(0,i.useRef)({billing:n,shippingData:r,onClick:g,addNotice:_,addShippingHandler:h,setPaymentMethodNonce:O,onPaymentDataFilter:S}),C=(0,i.useCallback)((function(){var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}((0,u.range)(10,2,-1));try{for(t.s();!(e=t.n()).done;){var n=e.value;if(ApplePaySession.supportsVersion(n))return n}}catch(e){t.e(e)}finally{t.f()}return 3}),[]),w=(0,i.useCallback)((function(e){var n=D.current.session;t.performValidation({validationURL:e.validationURL,displayName:b("displayName")}).then((function(e){n.completeMerchantValidation(e)})).catch((function(e){n.abort(),_(e)}))}),[t,_]),k=(0,i.useCallback)((function(e){var t,n,r,a,o=e.paymentMethod,i=D.current,c=i.session,u=i.addNotice,l=null;o.billingContact&&(l={country:(null===(t=o.billingContact)||void 0===t?void 0:t.countryCode)||"",state:(null===(n=o.billingContact)||void 0===n?void 0:n.administrativeArea)||"",postcode:(null===(r=o.billingContact)||void 0===r?void 0:r.postalCode)||"",city:(null===(a=o.billingContact)||void 0===a?void 0:a.locality)||""}),(0,d.default)({url:b("routes").paymentMethod,method:"POST",data:{address:l}}).then((function(e){e.code?(c.abort(),u(e.messages)):c.completePaymentMethodSelection(e.data)})).catch((function(e){}))}),[]),j=(0,i.useCallback)((function(e){var t=e.shippingContact,n=D.current,r=n.shippingData,a=n.addShippingHandler,o=r.shippingAddress,i=r.setShippingAddress,l=o.country,s=o.state,d=o.city,m=o.postcode,y={country:null==t?void 0:t.countryCode.toUpperCase(),state:null==t?void 0:t.administrativeArea.toUpperCase(),city:t.locality,postcode:t.postalCode};a((function(e,t){var n=t.billing,r=t.shippingData,a=D.current.session,o=n.cartTotal,i=n.cartTotalItems,u=n.currency,l=r.shippingRates,s=(r.selectedRates,{newTotal:{label:b("displayName"),type:"final",amount:(0,f.removeNumberPrecision)(o.value,u.minorUnit).toString()},newLineItems:(0,p.formatLineItems)(i,u.minorUnit),newShippingMethods:(0,p.formatShippingMethods)(l)});D.current.errors=[],e||(s.newShippingMethods=[{identifier:"0:error:1",label:(0,c.__)("No shipping methods","woo-payment-gateway"),detail:(0,c.__)("There are no shipping options available for the selected address.","woo-payment-gateway"),amount:"0.00"}],D.current.errors=[new ApplePayError("addressUnserviceable")]),a.completeShippingContactSelection(s)}),(0,u.isEqual)({country:l,state:s,city:d,postcode:m},y)),i(v(v({},o),y))}),[]),M=(0,i.useCallback)((function(e){var t=e.shippingMethod,n=D.current,r=n.session,o=n.billing,i=n.shippingData,u=n.addNotice,l=o.cartTotal,s=i.setSelectedRates,d=i.selectedRates,m=(0,f.getSelectedShippingOptionId)(d)==t.identifier;s.apply(void 0,(0,a.default)((0,f.extractSelectedShippingOption)(t.identifier))),h((function(e,t){var n=t.billing,a=n.currency,o=n.cartTotalItems;e?r.completeShippingMethodSelection({newTotal:{label:b("displayName"),type:"final",amount:(0,f.removeNumberPrecision)(l.value,a.minorUnit).toString()},newLineItems:(0,p.formatLineItems)(o,a.minorUnit)}):(r.abort(),u((0,c.__)("There was an error updating your cart totals.","woo-payment-gateway")))}),m)}),[]),N=(0,i.useCallback)((function(e){var n,r=D.current,a=r.session,o=r.setPaymentMethodNonce,i=r.errors,c=void 0===i?[]:i;(null==c?void 0:c.length)>0?a.completePayment({status:ApplePaySession.STATUS_FAILURE,errors:c}):t.tokenize({token:null==e||null===(n=e.payment)||void 0===n?void 0:n.token}).then((function(t){var n=e.payment,r=n.shippingContact,i=void 0===r?null:r,c=n.billingContact,u=void 0===c?null:c;E.current.billingData={},i&&(D.current.shippingData.needsShipping&&(E.current.shippingAddress=v({first_name:null==i?void 0:i.givenName,last_name:null==i?void 0:i.familyName,city:null==i?void 0:i.locality,state:null==i?void 0:i.administrativeArea,postcode:null==i?void 0:i.postalCode,country:null==i?void 0:i.countryCode},(0,f.extractAddressLines)((null==i?void 0:i.addressLines)||[]))),(null==i?void 0:i.phoneNumber)&&(E.current.billingData.phone=null==i?void 0:i.phoneNumber),(null==i?void 0:i.emailAddress)&&(E.current.billingData.email=null==i?void 0:i.emailAddress)),u&&(E.current.billingData=v(v({first_name:null==u?void 0:u.givenName,last_name:null==u?void 0:u.familyName,city:null==u?void 0:u.locality,state:null==u?void 0:u.administrativeArea,postcode:null==u?void 0:u.postalCode,country:null==u?void 0:u.countryCode},(0,f.extractAddressLines)((null==u?void 0:u.addressLines)||"")),E.current.billingData)),o(t.nonce),a.completePayment(ApplePaySession.STATUS_SUCCESS)})).catch((function(e){a.completePayment(ApplePaySession.STATUS_FAILURE)}))}),[t]);(0,i.useEffect)((function(){D.current=v(v({},D.current),{},{billing:n,shippingData:r,onClick:g,addNotice:_,addShippingHandler:h,setPaymentMethodNonce:O})}),[n,r]),(0,i.useEffect)((function(){var e=S((function(e,t){var n,r,a=t.billing,o=t.shippingData;return(0,u.isEmpty)(null===(n=E.current)||void 0===n?void 0:n.billingData)||(e.meta.billingData=v(v({},a.billingData),E.current.billingData)),(0,u.isEmpty)(null===(r=E.current)||void 0===r?void 0:r.shippingAddress)||(e.meta.shippingData={address:v(v({},o.shippingAddress),E.current.shippingAddress)}),e}));return function(){return e()}}),[S]);var x=(0,i.useCallback)((function(){var e=D.current.shippingData,t=new ApplePaySession(C(),o);return t.onvalidatemerchant=w,t.onpaymentmethodselected=k,t.onpaymentauthorized=N,e.needsShipping&&(t.onshippingcontactselected=j,t.onshippingmethodselected=M),D.current.session=t,t}),[t,o,C,w,k,N,j,M]);return{handleClick:(0,i.useCallback)((function(){D.current.onClick();try{x().begin()}catch(e){alert(e)}}),[x])}};t.useCreateSession=g;var b=g;t.default=b},3846:function(e,t,n){var r,a=n(3027),o=n(5318),i=o(n(7015)),c=o(n(8926)),u=o(n(3038)),l=n(3027),s=n(4222),d=n(4626),p=n(9154),f=n(9448),m=n(89),v=n(4142),y=o(n(2266)),g=(0,p.getSettings)("braintree_applepay"),b=new Promise((function(e,t){(0,d.create)({authorization:(0,p.getClientToken)()}).then((function(t){return e(t)})).catch((function(e){return t(e)}))})),h=function(e){var t=e.getData,n=e.billing,r=e.shippingData,o=e.eventRegistration,i=e.onClick,c=(0,l.useState)(null),s=(0,u.default)(c,2),d=s[0],p=s[1],f=(0,m.usePaymentMethodDataContext)().notice.addNotice,y=(0,v.useCreatePaymentRequest)({applePayInstance:d,billing:n,shippingData:r,getData:t}),g=(0,v.useCreateSession)({applePayInstance:d,billing:n,shippingData:r,paymentRequest:y,eventRegistration:o,onClick:i,getData:t}).handleClick;return(0,l.useEffect)((function(){b.then((function(e){return p(e)})).catch((function(e){return f(e)}))}),[]),a.createElement("div",{className:"wc-braintree-blocks-apple-pay-button__container"},a.createElement(P,{onClick:g,type:t("buttonType"),style:t("buttonStyle")}))},P=function(e){var t=e.onClick,n=e.type,r=e.style,o={"-apple-pay-button-type":n,"-apple-pay-button-style":function(e){switch(e){case"apple-pay-button-black":return"black";case"apple-pay-button-white":return"white";case"apple-pay-button-white-with-line":return"white-outline"}}(r)};return a.createElement("button",{className:"wc-braintree-blocks-apple-pay__button ".concat(r),style:o,onClick:t})};(0,s.registerExpressPaymentMethod)({name:g("name"),canMakePayment:(r=(0,c.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=b,!window.ApplePaySession||!ApplePaySession.canMakePayments()){e.next=6;break}return e.next=5,ApplePaySession.canMakePaymentsWithActiveCard(t.merchantIdentifier);case 5:return e.abrupt("return",e.sent);case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(){return r.apply(this,arguments)}),content:a.createElement(f.PaymentMethod,{content:function(e){return a.createElement(y.default,null,a.createElement(h,e))},title:g("title"),description:g("description"),name:g("name"),icon:g("icon"),getData:g,isExpress:!0}),edit:a.createElement(f.PaymentMethod,{content:h,getData:g}),supports:{features:g("features")}})},2338:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.formatShippingMethods=t.formatLineItems=void 0;var a=r(n(319)),o=n(9154);t.formatLineItems=function(e,t){var n=[],r=["total_tax","total_shipping"];return e.forEach((function(e){(0<e.value||e.key&&r.includes(e.key))&&n.push({label:e.label,type:"final",amount:(0,o.removeNumberPrecision)(e.value,t).toString()})})),n},t.formatShippingMethods=function(e){var t=[];return e.forEach((function(e,n){var r=e.shipping_rates.map((function(e){var t=document.createElement("textarea");return t.innerHTML=e.name,{identifier:(0,o.getShippingOptionId)(n,e.rate_id),label:t.value,detail:"",amount:(0,o.removeNumberPrecision)(e.price,e.currency_minor_unit)}}));t=[].concat((0,a.default)(t),(0,a.default)(r))})),t}},658:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.emittFilter=t.useActionEmitter=void 0;var a=r(n(7015)),o=r(n(8926)),i=n(3027),c=n(3804),u=n(3160);function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.useActionEmitter=function(e){return(0,i.useMemo)((function(){return{onPaymentDataFilter:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r={action:u.ACTIONS.ADD_ACTION,type:"payment_data_filter",id:(0,c.uniqueId)(),callback:t,priority:n};return e(r),function(){return e({action:u.ACTIONS.REMOVE_ACTION,type:r.type,id:r.id})}}}}),[e])};var d=function(){var e=(0,o.default)(a.default.mark((function e(t,n,r){var o,i,c,u,s,d,p;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r.handlers,i=r.type,c=o[i],u=Array.from(c.values()).sort((function(e,t){return e.priority-t.priority})),e.prev=3,s=l(u),e.prev=5,s.s();case 7:if((d=s.n()).done){e.next=14;break}return p=d.value,e.next=11,Promise.resolve(p.callback(t,n));case 11:t=e.sent;case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),s.e(e.t0);case 19:return e.prev=19,s.f(),e.finish(19);case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(3),console.log(e.t1);case 27:return e.abrupt("return",t);case 28:case"end":return e.stop()}}),e,null,[[3,24],[5,16,19,22]])})));return function(t,n,r){return e.apply(this,arguments)}}();t.emittFilter=d},3160:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.actionReducer=t.ACTIONS=void 0;var a=r(n(9713));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={ADD_ACTION:"add_action",REMOVE_ACTION:"remove_action"};t.ACTIONS=c,t.actionReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.action,r=t.type,o=t.id,u=t.callback,l=t.priority,s=void 0===l?10:l,d=e[r]?e[r]:new Map;switch(n){case c.ADD_ACTION:return d.set(o,{callback:u,priority:s}),i(i({},e),{},(0,a.default)({},r,d));case c.REMOVE_ACTION:return d.delete(o),i(i({},e),{},(0,a.default)({},r,d))}return e}},89:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(8085);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var a=n(3160);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}));var o=n(658);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}))},8085:function(e,t,n){var r=n(3027),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.usePaymentMethodDataContext=t.PaymentMethodDataProvider=void 0;var o=a(n(7015)),i=a(n(8926)),c=a(n(3038)),u=n(3027),l=n(89),s=n(9154),d=n(3636),p=(0,u.createContext)();t.PaymentMethodDataProvider=function(e){var t=e.children,n=e.container,a=e.onSubmit,f=e.getData,m=e.isExpress,v=void 0===m?null:m,y=e.setExpressPaymentError,g=(0,u.useState)(),b=(0,c.default)(g,2),h=b[0],P=b[1],O=(0,u.useState)(null),S=(0,c.default)(O,2),_=S[0],E=S[1],D=(0,u.useReducer)(l.actionReducer,{}),C=(0,c.default)(D,2),w=C[0],k=C[1],j=(0,l.useActionEmitter)(k).onPaymentDataFilter,M=(0,u.useRef)(w),N=(0,u.useRef)({onSubmit:a}),x=(0,u.useRef)(null),A=(0,d.useNoticeHandler)({isExpress:v,setExpressPaymentError:y}),I=(0,c.default)(A,3),R=I[0],T=I[1],F=I[2],L=(0,u.useCallback)(function(){var e=(0,i.default)(o.default.mark((function e(t,n){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.emittFilter)(t,n,{handlers:M.current,type:"payment_data_filter"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),H=(0,u.useCallback)((function(e){x.current=e}),[]);(0,u.useEffect)((function(){M.current=w}),[w]),(0,u.useEffect)((function(){s.loadClient.then((function(e){return P(e)})).catch((function(e){T(e)}))}),[T]),(0,u.useEffect)((function(){N.current={onSubmit:a}}),[a]),(0,u.useEffect)((function(){_&&N.current.onSubmit()}),[_]);var U={container:n,client:h,paymentMethodNonce:_,setPaymentMethodNonce:E,onPaymentDataFilter:j,doPaymentDataFilter:L,setPaymentHandler:H,onSubmit:a,paymentHandler:x.current,notice:{notice:R,addNotice:T,removeNotice:F},fraud:{enabled:f("advancedFraudEnabled")},threeDSecureEnabled:f("threeDSecureEnabled")};return r.createElement(p.Provider,{value:U},t)},t.usePaymentMethodDataContext=function(){return(0,u.useContext)(p)}},1926:function(e,t,n){var r=n(3027),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CustomForm=void 0;var o=a(n(9713)),i=a(n(3038)),c=n(3027),u=n(3163),l=n(8514),s=a(n(4184)),d=n(4427),p=n(3636);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(4824);var y=function(e){var t=e.options,n=e.client,a=e.id,u=e.setPaymentHandler,s=(0,d.getCustomFormConfig)(a),f=s.breakpoint,y=void 0===f?0:f,h=s.fields,P=void 0===h?[]:h,O=s.content,S=void 0===O?null:O,_=s.className,E=void 0===_?"":_,D=(0,c.useState)(!1),C=(0,i.default)(D,2),w=C[0],k=C[1],j=(0,c.useState)({}),M=(0,i.default)(j,2),N=M[0],x=M[1],A=(0,c.useState)(),I=(0,i.default)(A,2),R=I[0],T=I[1],F=(0,c.useState)(null),L=(0,i.default)(F,2),H=L[0],U=L[1],B=(0,c.useRef)([]),z=(0,c.useCallback)((function(e){return 0==P.reduce((function(t,n){return e.hasOwnProperty(n)||t.push(n),t}),[]).length}),[]),q=(0,c.useCallback)((function(e){return function(n){var r;if(!(null==N||null===(r=N[e])||void 0===r?void 0:r.container)&&null!==n){var a=m({container:n},t.fields[e]);x(m(m({},N),{},(0,o.default)({},e,a)))}}}),[N,x]),V=(0,c.useCallback)((function(e,t){e.forEach((function(e){var n;null==N||null===(n=N[e])||void 0===n||n.container.classList.add(t)}))}),[N]),W=(0,c.useCallback)((function(e){e.shippingData;var t=e.billing;return new Promise((function(e,n){var r,a,o={billingAddress:{}};(null==t||null===(r=t.billingData)||void 0===r?void 0:r.address_1)&&(o.billingAddress.streetAddress=t.billingData.address_1),(null==t||null===(a=t.billingData)||void 0===a?void 0:a.postcode)&&(o.billingAddress.postalCode=t.billingData.postcode),w.tokenize(o,(function(t,r){var a;t?("HOSTED_FIELDS_FIELDS_INVALID"===t.code?V((null==t||null===(a=t.details)||void 0===a?void 0:a.invalidFieldKeys)||[],"braintree-hosted-fields-invalid"):"HOSTED_FIELDS_FIELDS_EMPTY"===t.code&&V(P,"braintree-hosted-fields-invalid"),n(t)):e(r)}))}))}),[w]);return(0,c.useEffect)((function(){u(W)}),[W]),(0,p.useBreakpointWidth)({key:a,el:R,className:E,breakpoint:y}),(0,c.useEffect)((function(){z(N)&&n.then((function(e){(0,l.create)({client:e,fields:N,styles:t.styles}).then((function(e){return k(e)})).catch((function(e){}))}))}),[N]),(0,c.useEffect)((function(){w&&(w.on("cardTypeChange",(function(e){var t;1==(null==e||null===(t=e.cards)||void 0===t?void 0:t.length)?U(e.cards[0].type):U(null)})),w.on("validityChange",(function(e){if(e.fields[e.emittedBy].isValid){var t,n=B.current.indexOf(e.emittedBy);if(null===(t=B.current)||void 0===t?void 0:t[n+1]){var r=B.current[n+1];w.focus(r)}}})))}),[w]),S?r.createElement("div",{ref:T,className:"wc-braintree-blocks-custom__form"},(0,c.cloneElement)(S,{setFieldContainer:q,setFieldOrder:function(e){B.current.includes(e)||B.current.push(e)},CardIcon:r.createElement(b,{type:H,src:function(e){var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(t.icons);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.type===e)return a.src}}catch(e){r.e(e)}finally{r.f()}return null}(H)})})):r.createElement(g,{id:a})};t.CustomForm=y;var g=function(e){var t=e.id;return r.createElement("div",{className:"wc-braintree-blocks-notice__info"},(0,u.sprintf)((0,u.__)("%s is not a supported custom form.","woo-payment-gateway"),t))},b=function(e){var t=e.type,n=e.src;if(!t)return null;var a=(0,s.default)("wc-braintree-blocks-current-card__icon",t);return r.createElement("img",{className:a,src:n})},h=y;t.default=h},4427:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCustomFormConfig=t.registerCustomForm=void 0;var n={};t.registerCustomForm=function(e){a(e),n[e.id]=e},t.getCustomFormConfig=function(e){return r(e)?n[e]:{}};var r=function(e){return n.hasOwnProperty(e)},a=function(e){if(!e.id)throw new Error("Custom forms must have a unique ID.");o(e,["content","breakpoint"])},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.reduce((function(t,n){return e.hasOwnProperty(n)||t.push(n),t}),[]);if(n.length>0)throw new TypeError("Custom form config missing params ".concat(n.join(", ")))}},9587:function(e,t,n){var r=n(3027),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BootstrapForm=void 0;var o=a(n(7154)),i=n(638);n(7884);var c=function(e){return r.createElement("div",{className:"wc-braintree-blocks-bootstrap__form"},r.createElement("div",{className:"row"},r.createElement("div",{className:"col-md-6"},r.createElement("div",{className:"form-group cardnumber-form-group"},r.createElement("label",null,"Card Number"),r.createElement(i.CardNumber,(0,o.default)({className:"bootstrap-input"},e)))),r.createElement("div",{className:"col-md-3"},r.createElement("div",{className:"form-group"},r.createElement("label",null,"Exp Date"),r.createElement(i.CardExpirationDate,(0,o.default)({className:"bootstrap-input"},e)))),r.createElement("div",{className:"col-md-3"},r.createElement("div",{className:"form-group"},r.createElement("label",null,"CVV"),r.createElement(i.CardCVV,(0,o.default)({className:"bootstrap-input"},e))))))};t.BootstrapForm=c;var u=c;t.default=u},4824:function(e,t,n){var r=n(3027),a=n(5318),o=n(4427),i=a(n(9587));(0,o.registerCustomForm)({id:"bootstrap_form",content:r.createElement(i.default,null),breakpoint:425,fields:["number","expirationDate","cvv"],className:"bootstrap-md"})},5982:function(e,t,n){var r=n(3027),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DropinForm=void 0;var o=a(n(3038)),i=n(4677),c=n(3027),u=function(e){var t=e.options,n=e.setDropinInstance,a=t.clientToken,u=t.locale,l=void 0===u?"en_US":u,s=(0,c.useState)(null),d=(0,o.default)(s,2),p=d[0],f=d[1],m=(0,c.useRef)(null);return(0,c.useEffect)((function(){(0,i.create)({authorization:a,container:".wc-braintree-blocks-dropin__form",locale:l},(function(e,t){e?f(null==e?void 0:e.message):n(t)}))}),[]),r.createElement(r.Fragment,null,p&&r.createElement("div",{className:"wc-braintree-blocks__error"},p),r.createElement("div",{ref:m,className:"wc-braintree-blocks-dropin__form"}))};t.DropinForm=u;var l=u;t.default=l},8660:function(e,t,n){var r=n(3027),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CardCVV=void 0;var o=a(n(4184)),i=function(e){var t=e.setFieldContainer,n=e.setFieldOrder,a=e.className;n("cvv");var i=(0,o.default)("braintree-web-hosted-field",a);return r.createElement("div",{ref:t("cvv"),id:"braintree-cvv",className:i})};t.CardCVV=i;var c=i;t.default=c},3908:function(e,t,n){var r=n(3027),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CardExpirationDate=void 0;var o=a(n(4184)),i=function(e){var t=e.setFieldContainer,n=e.setFieldOrder,a=e.className;n("expirationDate");var i=(0,o.default)("braintree-web-hosted-field",a);return r.createElement("div",{ref:t("expirationDate"),id:"braintree-exp-date",className:i})};t.CardExpirationDate=i;var c=i;t.default=c},436:function(e,t,n){var r=n(3027),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CardNumber=void 0,n(3027);var o=a(n(4184)),i=function(e){e.onChange;var t=e.setFieldContainer,n=e.setFieldOrder,a=e.className,i=e.CardIcon;n("number");var c=(0,o.default)("braintree-web-hosted-field",a);return r.createElement("div",{ref:t("number"),id:"braintree-number",className:c},i)};t.CardNumber=i;var c=i;t.default=c},638:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(436);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var a=n(3908);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}));var o=n(8660);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}))},627:function(e,t,n){var r=n(3027),a=n(5318),o=a(n(3038)),i=a(n(7154)),c=n(3027),u=n(4222),l=a(n(4184)),s=n(3163),d=n(9154),p=n(6723),f=a(n(5982)),m=a(n(1926)),v=n(89),y=(0,d.getSettings)("braintree_cc"),g=function(e){var t=(0,v.usePaymentMethodDataContext)(),n=t.setPaymentHandler,a=t.notice,o=y("dropinEnabled"),i=o?h:b,c=(0,l.default)("wc-braintree-card-container",{dropin:o,customForm:!o});return r.createElement(r.Fragment,null,(null==a?void 0:a.notice)&&r.createElement(p.Notice,{notice:a.notice,onRemove:a.removeNotice}),r.createElement("div",{className:c},r.createElement(i,{setPaymentHandler:n})))},b=function(e){var t={fields:y("hostedFieldsOptions"),styles:y("hostedFieldsStyles"),icons:y("icons")};return r.createElement(m.default,(0,i.default)({options:t,client:d.loadClient,id:y("customForm")},e))},h=function(e){var t=e.setPaymentHandler,n=(0,c.useState)(null),a=(0,o.default)(n,2),i=a[0],u=a[1],l=(0,c.useCallback)((function(){return new Promise((function(e,t){i.requestPaymentMethod((function(n,r){n?t(n):e(r)}))}))}),[i]);(0,c.useEffect)((function(){t(l)}),[l]);var s={clientToken:(0,d.getClientToken)(),locale:"en_US"};return r.createElement(f.default,{options:s,setDropinInstance:u})};(0,u.registerPaymentMethod)({name:y("name"),label:r.createElement(p.PaymentMethodLabel,{title:y("title"),paymentMethod:y("name"),icon:y("icon")}),ariaLabel:(0,s.__)("Credit Cards","woo-payment-gateway"),canMakePayment:function(){return!0},content:r.createElement(p.PaymentMethod,{content:g,title:y("title"),description:y("description"),name:y("name"),icon:y("icon"),getData:y}),savedTokenComponent:r.createElement(p.SavedTokenProvider,{getData:y,name:y("name"),vaultedThreeDSecure:y("vaultedThreeDSecure")}),edit:r.createElement(p.PaymentMethod,{content:g,getData:y}),supports:{showSavedCards:y("features").includes("tokenization"),showSaveOption:(0,d.canShowSavedCard)(),features:y("features")}})},6066:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedShippingOptionId=t.getShippingOptions=t.getDisplayItems=void 0;var a=r(n(319)),o=n(9154);t.getDisplayItems=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=[],r=["total_tax","total_shipping"];return e.forEach((function(e){(0<e.value||e.key&&r.includes(e.key))&&n.push({label:e.label,type:"LINE_ITEM",price:(0,o.removeNumberPrecision)(e.value,t).toString()})})),n},t.getShippingOptions=function(e){var t=[];return e.forEach((function(e,n){var r=e.shipping_rates.map((function(e){var t=document.createElement("textarea");t.innerHTML=e.name;var r=(0,o.formatPrice)(e.price,e.currency_code);return{id:(0,o.getShippingOptionId)(n,e.rate_id),label:t.value,description:"".concat(r)}}));t=[].concat((0,a.default)(t),(0,a.default)(r))})),t},t.getSelectedShippingOptionId=function(e){var t="";return e.forEach((function(e,n){e.shipping_rates.forEach((function(e){e.selected&&(t=(0,o.getShippingOptionId)(n,e.rate_id))}))})),t}},5516:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(326);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var a=n(6874);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}))},326:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.useCreatePaymentsClient=void 0;var a=r(n(319)),o=r(n(9713)),i=r(n(3038)),c=n(3027),u=n(3163),l=r(n(3905)),s=n(3804),d=n(3636),p=n(9154),f=n(6066);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.useCreatePaymentsClient=function(e){var t=e.getData,n=e.shippingData,r=e.billing,o=e.eventRegistration,m=n.needsShipping,y=(0,c.useState)(null),g=(0,i.default)(y,2),b=g[0],h=g[1],P=(0,d.usePaymentEventsHandler)({billing:r,shippingData:n,eventRegistration:o}).addShippingHandler,O=(0,c.useRef)({billing:r,shippingData:n});return(0,c.useEffect)((function(){O.current={billing:r,shippingData:n}}),[r,n]),(0,c.useEffect)((function(){var e={environment:t("googleEnvironment"),merchantInfo:{merchantName:t("merchantName"),merchantId:t("googleMerchantId")},paymentDataCallbacks:{onPaymentAuthorized:function(){return Promise.resolve({transactionState:"SUCCESS"})}}};m&&(e.paymentDataCallbacks.onPaymentDataChanged=function(e){return new Promise((function(n,r){var o=e.shippingAddress,i=e.shippingOptionData,c=O.current.shippingData,l=(0,f.getSelectedShippingOptionId)(c.shippingRates)===(null==i?void 0:i.id),d={city:o.locality,state:o.administrativeArea,postcode:o.postalCode,country:o.countryCode},m=(0,s.isEqual)({city:c.shippingAddress.city,state:c.shippingAddress.state,postcode:c.shippingAddress.postcode,country:c.shippingAddress.country},d);P((function(e,r){var a=r.billing,o=r.shippingData,i=a.currency,c=a.cartTotal,l=a.cartTotalItems,s=o.shippingRates;n(e?{newTransactionInfo:{countryCode:t("countryCode"),currencyCode:i.code,totalPriceStatus:"FINAL",totalPrice:(0,p.removeNumberPrecision)(c.value,i.minorUnit).toString(),totalPriceLabel:t("totalPriceLabel"),displayItems:(0,f.getDisplayItems)(l,i.minorUnit)},newShippingOptionParameters:{shippingOptions:(0,f.getShippingOptions)(s),defaultSelectedOptionId:(0,f.getSelectedShippingOptionId)(s)}}:{error:{reason:"SHIPPING_ADDRESS_UNSERVICEABLE",message:(0,u.__)("Your shipping address is not serviceable.","woo-payment-gateway"),intent:"SHIPPING_ADDRESS"}})}),m&&l),c.setShippingAddress(v(v({},c.shippingAddress),d)),"shipping_option_unselected"!==(null==i?void 0:i.id)&&c.setSelectedRates.apply(c,(0,a.default)((0,p.extractSelectedShippingOption)(i.id)))}))}),h(new l.default.payments.api.PaymentsClient(e))}),[m,P]),b}},6874:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useHandleTokenization=void 0;var a=r(n(7015)),o=r(n(3038)),i=r(n(8926)),c=r(n(319)),u=r(n(9713)),l=n(3027),s=n(6066),d=n(9154),p=n(89);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,u.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.getData,n=e.onClick,r=e.onClose,u=e.googlePayInstance,f=e.paymentsClient,v=e.billing,y=e.shippingData,g=(0,l.useRef)({billing:v,shippingData:y}),b=(0,l.useRef)({}),h=(0,p.usePaymentMethodDataContext)(),P=h.setPaymentMethodNonce,O=h.onPaymentDataFilter;return(0,l.useEffect)((function(){g.current={billing:v,shippingData:y,onClick:n,onClose:r}}),[n,y,v]),(0,l.useEffect)((function(){var e=O((function(e,t){var n,r,a=t.billing,o=t.shippingData;return(null===(n=b.current)||void 0===n?void 0:n.billingData)&&(e.meta.billingData=m(m({},a.billingData),b.current.billingData),b.current.email&&(e.meta.billingData.email=b.current.email)),(null===(r=b.current)||void 0===r?void 0:r.shippingAddress)&&(e.meta.shippingData={address:m(m({},o.shippingAddress),b.current.shippingAddress)}),e}));return function(){return e()}}),[O]),(0,l.useCallback)((function(){var e=g.current,n=e.billing,r=e.shippingData,l=n.billingData,p=n.currency,m=n.cartTotal,v=n.cartTotalItems,y=r.needsShipping,h=r.shippingRates;g.current.onClick();var O={merchantInfo:{merchantName:t("googleMerchantName"),merchantId:t("googleMerchantId")},transactionInfo:{countryCode:t("countryCode"),currencyCode:p.code,totalPriceStatus:"FINAL",totalPrice:(0,d.removeNumberPrecision)(m.value,p.minorUnit).toString(),totalPriceLabel:t("totalPriceLabel"),displayItems:(0,s.getDisplayItems)(v,p.minorUnit)},emailRequired:!l.email,callbackIntents:["PAYMENT_AUTHORIZATION"],shippingAddressRequired:y};if(y){O.shippingAddressParameters={},O.shippingOptionRequired=!0,O.callbackIntents=[].concat((0,c.default)(O.callbackIntents),["SHIPPING_ADDRESS","SHIPPING_OPTION"]);var S=(0,s.getShippingOptions)(h);S.length&&(O.shippingOptionParameters={shippingOptions:S,defaultSelectedOptionId:(0,s.getSelectedShippingOptionId)(h)})}var _=u.createPaymentDataRequest(O);_.allowedPaymentMethods[0].parameters.assuranceDetailsRequired=!0,_.allowedPaymentMethods[0].parameters.billingAddressRequired=!0,_.allowedPaymentMethods[0].parameters.billingAddressParameters={format:"FULL",phoneNumberRequired:!0},f.loadPaymentData(_).then(function(){var e=(0,i.default)(a.default.mark((function e(t){var n,r,i,c,l,s,p,f,m,v,y,g,h;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(null==t||null===(n=t.paymentMethodData)||void 0===n||null===(r=n.info)||void 0===r?void 0:r.billingAddress)&&(i=t.paymentMethodData.info.billingAddress,c=(0,d.extractFullName)(i.name),l=(0,o.default)(c,2),s=l[0],p=l[1],b.current.billingData={first_name:s,last_name:p,address_1:i.address1,address_2:i.address2,city:i.locality,state:i.administrativeArea,postcode:i.postalCode,country:i.countryCode}),t.shippingAddress&&(f=t.shippingAddress,m=(0,d.extractFullName)(f.name),v=(0,o.default)(m,2),y=v[0],g=v[1],b.current.shippingAddress={first_name:y,last_name:g,address_1:f.address1,address_2:f.address2,city:f.locality,state:f.administrativeArea,postcode:f.postalCode,country:f.countryCode}),t.email&&(b.current.email=t.email),e.next=5,u.parseResponse(t);case 5:h=e.sent,b.current.paymentMethodNonce=h.nonce,P(h.nonce);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){"CANCELED"!==(null==e?void 0:e.statusCode)?console.log(e):g.current.onClose()}))}),[f,u,P])};t.useHandleTokenization=v;var y=v;t.default=y},5341:function(e,t,n){var r=n(3027),a=n(5318),o=a(n(7015)),i=a(n(8926)),c=a(n(9713)),u=a(n(3038)),l=n(3027),s=n(6907),d=n(4222),p=n(6723),f=n(9154),m=a(n(3905)),v=n(5516),y=n(89),g=n(3636);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P,O=(0,f.getSettings)("braintree_googlepay"),S=null,_=new m.default.payments.api.PaymentsClient({environment:O("googleEnvironment"),merchantInfo:{merchantName:O("googleMerchantName"),merchantId:O("googleMerchantId")}}),E=function(e){var t=e.getData,n=e.billing,a=e.shippingData,o=e.eventRegistration,i=e.onClick,c=e.onClose,d=(0,l.useRef)(null),p=(0,l.useState)(null),m=(0,u.default)(p,2),b=m[0],P=m[1];(0,g.useExpressBreakpointWidth)({breakpoint:375});var O=(0,y.usePaymentMethodDataContext)().notice,S=(0,v.useCreatePaymentsClient)({getData:t,billing:n,shippingData:a,eventRegistration:o}),_=(0,v.useHandleTokenization)({getData:t,onClick:i,onClose:c,googlePayInstance:b,paymentsClient:S,billing:n,shippingData:a}),E=(0,l.useCallback)((function(e){for(;e.lastChild;)e.removeChild(e.lastChild)}),[]);return(0,l.useEffect)((function(){(0,s.create)({authorization:(0,f.getClientToken)(),googlePayVersion:2,googleMerchantId:t("googleMerchantId")}).then((function(e){P(e)})).catch((function(e){return O.addNotice(e)}))}),[]),(0,l.useEffect)((function(){if(d.current&&S){E(d.current);var e=S.createButton(h(h({},t("buttonOptions")),{onClick:_}));d.current.append(e)}}),[S,E,_]),r.createElement("div",{ref:d,className:"wc-braintree-blocks-gpay-button"})};(0,d.registerExpressPaymentMethod)({name:O("name"),canMakePayment:(P=(0,i.default)(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===S){e.next=2;break}return e.abrupt("return",S);case 2:return e.prev=2,e.next=5,(0,s.create)({authorization:(0,f.getClientToken)(),googlePayVersion:2,googleMerchantId:O("googleMerchantId")});case 5:return t=e.sent,e.next=8,_.isReadyToPay({apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:t.createPaymentDataRequest().allowedPaymentMethods});case 8:return n=e.sent,S=!!n.result,e.abrupt("return",S);case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])}))),function(){return P.apply(this,arguments)}),content:r.createElement(p.PaymentMethod,{content:E,title:O("title"),description:O("description"),name:O("name"),icon:O("icon"),getData:O,isExpress:!0}),edit:r.createElement(p.PaymentMethod,{content:E,getData:O}),supports:{showSavedCards:O("features").includes("tokenization"),showSaveOption:!0,features:O("features")}})},3636:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(9430);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var a=n(3201);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}));var o=n(180);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}));var i=n(3380);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}));var c=n(5688);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}})}));var u=n(4825);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})}));var l=n(5554);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})}))},5554:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.useExpressBreakpointWidth=t.useBreakpointWidth=void 0;var a=r(n(3038)),o=n(3027),i=n(9154),c=n(89),u=function(e){var t=e.key,n=e.el,r=e.className,c=void 0===r?"":r,u=e.breakpoint,l=void 0===u?0:u,s=(0,o.useState)(window.innerWidth),d=(0,a.default)(s,2),p=d[0],f=d[1];t="".concat(t,":breakpoint"),(0,o.useEffect)((function(){if(n){var e=(0,i.getFromCache)(t,0);(l<e||!e)&&(e=l,(0,i.storeInCache)(t,e)),n.clientWidth<e?n.classList.add(c):n.classList.remove(c)}}),[n,p]),(0,o.useEffect)((function(){var e=function(e){return f(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}))};t.useBreakpointWidth=u,t.useExpressBreakpointWidth=function(e){var t=e.breakpoint,n=e.className,r=void 0===n?"wc-braintree-blocks-express-sm":n,i=(0,o.useState)(null),l=(0,a.default)(i,2),s=l[0],d=l[1],p=(0,c.usePaymentMethodDataContext)().container;(0,o.useEffect)((function(){var e;p&&d(null===(e=p.parentNode)||void 0===e?void 0:e.parentNode)}),[p]),u({key:"express",el:s,breakpoint:t,className:r})}},3380:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useDeviceData=void 0;var a=r(n(9713)),o=r(n(3038)),i=n(3027),c=n(8227),u=n(89);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,u.usePaymentMethodDataContext)(),n=t.client,r=t.notice,a=t.onPaymentDataFilter,l=t.fraud,d=l.enabled,p=r.addNotice,f=(0,i.useState)(null),m=(0,o.default)(f,2),v=m[0],y=m[1];return(0,i.useEffect)((function(){d&&n&&(0,c.create)(s({client:n,kount:!0},e),(function(e,t){e?p(e):y(t)}))}),[d,n,p]),(0,i.useEffect)((function(){var e=a((function(e,t){var n=t.name;return e.meta.paymentMethodData["".concat(n,"_device_data")]=null==v?void 0:v.deviceData,e}),10);return function(){return e()}}),[v,a]),v};t.useDeviceData=d;var p=d;t.default=p},5688:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useNoticeHandler=void 0;var a=r(n(3038)),o=n(3027),i=n(9154),c=function(e){var t=e.isExpress,n=e.setExpressPaymentError,r=(0,o.useState)(null),c=(0,a.default)(r,2),u=c[0],l=c[1];return[u,(0,o.useCallback)((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&"error"==r?n((0,i.getErrorMessage)(e)):l({message:(0,i.getErrorMessage)(e),type:r,isDismissible:a})}),[l,t,n]),(0,o.useCallback)((function(){return l(null)}),[l])]};t.useNoticeHandler=c;var u=c;t.default=u},4825:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.usePaymentEventsHandler=void 0;var a=r(n(7015)),o=r(n(8926)),i=n(3027);t.usePaymentEventsHandler=function(e){var t=e.billing,n=e.shippingData,r=e.eventRegistration,c=(0,i.useRef)({billing:t,shippingData:n}),u=r.onShippingRateSuccess,l=r.onShippingRateFail,s=r.onShippingRateSelectSuccess,d=(0,i.useRef)(new Map([["shippingHandler",[]],["shippingMethodHandler",[]],["shippingAddressHandler",[]]]));(0,i.useEffect)((function(){c.current={billing:t,shippingData:n}}));var p=(0,i.useCallback)((0,o.default)(a.default.mark((function e(){var t,n,r,o,i,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.current,n=t.billing,r=t.shippingData,!((o=d.current.get("shippingHandler")).length>0)||r.isSelectingRate||r.shippingRatesLoading){e.next=10;break}a=r.shippingRates,i=a.map((function(e){return(null==e?void 0:e.shipping_rates.length)>0})).filter(Boolean).length>0;case 4:if(!o.length){e.next=10;break}return u=o.pop(),e.next=8,Promise.resolve(u(i,{billing:n,shippingData:r}));case 8:e.next=4;break;case 10:case"end":return e.stop()}var a}),e)}))),[]),f=(0,i.useCallback)((function(){for(var e=c.current,t=e.billing,n=e.shippingData,r=d.current.get("shippingHandler");r.length;)r.pop()(!1,{billing:t,shippingData:n})}),[]),m=(0,i.useCallback)((function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=d.current.get(e);r.push(t),n&&p()}}),[p,d.current]),v=(0,i.useCallback)(m("shippingHandler"),[m]),y=(0,i.useCallback)(m("shippingMethodHandler"),[m]),g=(0,i.useCallback)(m("shippingAddressHandler"),[m]);return(0,i.useEffect)((function(){var e=u(p),t=s(p),n=l(f);return function(){e(),t(),n()}}),[u,s,l]),{addShippingHandler:v,addShippingMethodHandler:y,addShippingAddressHandler:g}}},180:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useProcessPaymentFailure=void 0;var r=n(3027),a=function(e){var t=e.event,n=e.responseTypes,a=e.messageContext,o=void 0===a?null:a;(0,r.useEffect)((function(){var e=t((function(e){var t,r;if(null==e||null===(t=e.processingResponse)||void 0===t||null===(r=t.paymentDetails)||void 0===r?void 0:r.braintreeErrorMessage){var a=e.processingResponse.paymentDetails.braintreeErrorMessage;return{type:n.ERROR,message:a,messageContext:o}}return null}));return function(){return e()}}),[t])};t.useProcessPaymentFailure=a;var o=a;t.default=o},9430:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useProcessPayment=void 0;var a=r(n(7015)),o=r(n(9713)),i=r(n(8926)),c=n(3027),u=n(9154),l=n(3201),s=n(3380),d=n(89);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.onPaymentProcessing,n=e.responseTypes,r=e.name,p=e.shippingData,m=e.billing,v=e.activePaymentMethod,y=e.advancedFraudOptions,g=void 0===y?{}:y,b=(0,c.useRef)({shippingData:p,billing:m,name:r,activePaymentMethod:v}),h=(0,d.usePaymentMethodDataContext)(),P=h.paymentMethodNonce,O=h.paymentHandler,S=h.doPaymentDataFilter;(0,l.useThreeDSecure)(),(0,s.useDeviceData)(g),(0,c.useEffect)((function(){b.current={shippingData:p,billing:m,name:r,activePaymentMethod:v,paymentMethodNonce:P}})),(0,c.useEffect)((function(){var e=t((0,i.default)(a.default.mark((function e(){var t,i,c,l,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b.current.activePaymentMethod!=b.current.name){e.next=18;break}if(e.prev=1,i=(null===(t=b.current)||void 0===t?void 0:t.paymentMethodNonce)||"",c={meta:{paymentMethodData:(0,o.default)({},"".concat(r,"_nonce_key"),i)}},!O){e.next=9;break}return e.next=7,Promise.resolve(O(b.current));case 7:l=e.sent,(null===(s=l)||void 0===s?void 0:s.nonce)&&(c.meta.paymentMethodData["".concat(r,"_nonce_key")]=l.nonce);case 9:return e.next=11,S(c,f(f({},b.current),{result:l}));case 11:return l=e.sent,e.abrupt("return",(0,u.ensureSuccessResponse)(n,l));case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",(0,u.ensureErrorResponse)(n,e.t0));case 18:case"end":return e.stop()}}),e,null,[[1,15]])}))));return function(){return e()}}),[t,S,O])};t.useProcessPayment=m;var v=m;t.default=v},3201:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useThreeDSecure=void 0;var a=r(n(3038)),o=n(3027),i=n(8185),c=n(9154),u=n(89),l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,u.usePaymentMethodDataContext)(),n=t.client,r=t.notice,l=t.onPaymentDataFilter,s=t.threeDSecureEnabled,d=r.addNotice,p=(0,o.useState)(null),f=(0,a.default)(p,2),m=f[0],v=f[1];return(0,o.useEffect)((function(){if((s||e)&&n&&!m)try{(0,i.create)({version:2,client:n},(function(e,t){e?d(e):v(t)}))}catch(e){}}),[s,e,n,d]),(0,o.useEffect)((function(){if(m){var e=l((function(e,t){var n=t.result,r=t.name,a=t.shippingData,o=t.billing;return new Promise((function(t,i){var u,l=a.needsShipping,s=a.shippingAddress,d=o.billingData,p=o.cartTotal,f=o.currency;m.verifyCard({amount:(0,c.removeNumberPrecision)(p.value,f.minorUnit),nonce:n.nonce,bin:null==n||null===(u=n.details)||void 0===u?void 0:u.bin,email:d.email||"",billingAddress:{givenName:d.first_name,surname:d.last_name,phoneNumber:d.phone,streetAddress:d.address_1,extendedAddress:d.address_2,locality:d.city,region:d.state,postalCode:d.postcode,countryCodeAlpha2:d.country},additionalInformation:l?{shippingGivenName:s.first_name,shippingSurname:s.last_name,shippingAddress:{streetAddress:s.address_1,extendedAddress:s.address_2,locality:s.city,region:s.state,postalCode:s.postcode,countryCodeAlpha2:s.country}}:{},onLookupComplete:function(e,t){return t()}},(function(n,a){n?i(n):(e.meta.paymentMethodData["".concat(r,"_nonce_key")]=a.nonce,t(e))}))}))}),20);return function(){return e()}}}),[m]),m};t.useThreeDSecure=l;var s=l;t.default=s},5520:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(8581);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var a=n(57);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}))},8581:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useLoadPayPal=void 0;var a=r(n(3038)),o=n(3027),i=function(e){var t=e.paypalCheckoutInstance,n=e.currency,r=e.addNotice,i=e.clientToken,c=e.intent,u=e.flow,l=e.partnerCode,s=(0,o.useState)(null),d=(0,a.default)(s,2),p=d[0],f=d[1],m=(0,o.useRef)({});return(0,o.useEffect)((function(){m.current.addNotice=r}),[r]),(0,o.useEffect)((function(){if(t){var e,r,a={"client-id":null===(e=i=JSON.parse(window.atob(i)))||void 0===e||null===(r=e.paypal)||void 0===r?void 0:r.clientId,commit:!0,intent:"vault"===u?"tokenize":c,currency:n,vault:"vault"===u,components:"buttons",dataAttributes:{"partner-attribution-id":l}};t.loadPayPalSDK(a).then((function(){f(window.paypal)})).catch((function(e){m.current.addNotice(e)}))}}),[t]),p};t.useLoadPayPal=i;var c=i;t.default=c},57:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.usePayPalOptions=void 0;var a=r(n(3038)),o=r(n(319)),i=r(n(9713)),c=n(3027),u=n(3163),l=n(3804),s=n(9154),d=n(3636),p=n(6066),f=n(89);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=e.getData,n=e.addNotice,r=e.paypal,i=e.paypalCheckoutInstance,m=e.billing,y=e.shippingData,g=e.eventRegistration,b=e.emitResponse,h=e.onClick,P=e.onClose,O=m.cartTotal,S=m.currency,_=y.needsShipping,E=b.noticeContexts,D=b.responseTypes,C=(0,c.useRef)({billing:m,shippingData:y}),w=(0,c.useRef)({}),k=(0,d.usePaymentEventsHandler)({billing:m,shippingData:y,eventRegistration:g}).addShippingHandler,j=(0,f.usePaymentMethodDataContext)(),M=j.setPaymentMethodNonce,N=j.onPaymentDataFilter,x=j.onSubmit,A=g.onCheckoutAfterProcessingWithError;(0,c.useEffect)((function(){var e=A((function(){return w.current.incompleteBilling?{type:D.ERROR,message:(0,u.__)("Please complete all required billing fields below then click Place Order.","woo-payment-gateway"),messageContext:E.EXPRESS_PAYMENTS}:null}));return function(){return e()}}),[A,D,E]);var I=(0,c.useCallback)((function(e){var n=t("buttonStyle");switch(e){case r.FUNDING.PAYPAL:return n;case r.FUNDING.PAYLATER:return v(v({},n),t("bnplButtonStyle"));default:return n}}),[r]),R=function(e){var t=[];return e.forEach((function(e,n){var r=e.shipping_rates.map((function(e){var t=document.createElement("textarea");return t.innerHTML=e.name,{id:(0,s.getShippingOptionId)(n,e.rate_id),label:t.value,type:"SHIPPING",selected:e.selected,amount:{value:(0,s.removeNumberPrecision)(e.price,2),currency_code:e.currency_code}}}));t=[].concat((0,o.default)(t),(0,o.default)(r))})),t};(0,c.useEffect)((function(){C.current={billing:m,shippingData:y,onClick:h,onClose:P,onSubmit:x,addNotice:n}}),[m,y,h]),(0,c.useEffect)((function(){var e=N((function(e,n){var r=n.billing,a=n.shippingData;return e.meta.paymentMethodData["".concat(t("name"),"_nonce_key")]=w.current.nonce,e.meta.billingData=v(v({},r.billingData),w.current.billingData),e.meta.shippingData={address:v(v({},a.shippingAddress),w.current.shippingAddress)},e}),5);return function(){return e()}}),[N]);var T=(0,c.useCallback)((function(e,t,n,r){return function(n,a){var o=a.billing,i=a.shippingData,c=o.currency,u=o.cartTotal,l=o.cartTotalItems,d=i.shippingRates;if(n){var p=[{op:"replace",path:"/purchase_units/@reference_id=='default'/amount",value:{currency_code:c.code,value:(0,s.removeNumberPrecision)(u.value,2),breakdown:{item_total:{currency_code:c.code,value:(0,s.removeNumberPrecision)((0,s.getCartTotalItem)("total_items",l),2)+(0,s.removeNumberPrecision)((0,s.getCartTotalItem)("total_fees",l),2)},shipping:{currency_code:c.code,value:(0,s.removeNumberPrecision)((0,s.getCartTotalItem)("total_shipping",l),2)},tax_total:{currency_code:c.code,value:(0,s.removeNumberPrecision)((0,s.getCartTotalItem)("total_tax",l),2)},shipping_discount:{currency_code:c.code,value:(0,s.removeNumberPrecision)((0,s.getCartTotalItem)("total_discount",l),2)}}}},{op:t?"replace":"add",path:"/purchase_units/@reference_id=='default'/shipping/options",value:R(d)}];return e.order.patch(p).then((function(){r(),e.resolve()}))}return r(),e.reject()}}),[]);return(0,c.useMemo)((function(){if(r&&i){var e=[],n=[r.FUNDING.PAYPAL];t("bnplEnabled")&&n.push(r.FUNDING.PAYLATER);for(var c=0,d=n;c<d.length;c++){var f=d[c],m={fundingSource:f,style:I(f),onError:function(e){return C.current.addNotice(e)},onClick:function(){C.current.onClick()},onApprove:function(e,t){return i.tokenizePayment(e).then((function(e){var t,n,r,o,i,c,d=C.current.billing.billingData,p=C.current.shippingData.needsShipping;if(w.current={nonce:e.nonce,billingData:{}},null==e||null===(t=e.details)||void 0===t?void 0:t.billingAddress){var f=e.details.billingAddress;w.current.billingData={address_1:f.line1,address_2:f.line2,city:f.city,state:f.state,postcode:f.postalCode,country:f.countryCode}}if(!(0,l.isEmpty)(null==e||null===(n=e.details)||void 0===n?void 0:n.shippingAddress)){var m=e.details.shippingAddress,v=(0,s.extractFullName)(m.recipientName),y=(0,a.default)(v,2),g=y[0],b=y[1];w.current.shippingAddress={first_name:g,last_name:b,address_1:m.line1,address_2:m.line2,city:m.city,state:m.state,postcode:m.postalCode,country:m.countryCode},(0,l.isEmpty)(w.current.billingData)&&(w.current.billingData=w.current.shippingAddress)}(null===(r=e.details)||void 0===r?void 0:r.phone)&&(w.current.billingData.phone=e.details.phone),(null===(o=e.details)||void 0===o?void 0:o.email)&&(w.current.billingData.email=e.details.email),(null===(i=e.details)||void 0===i?void 0:i.firstName)&&(w.current.billingData.first_name=e.details.firstName),(null===(c=e.details)||void 0===c?void 0:c.lastName)&&(w.current.billingData.last_name=e.details.lastName),w.current.billingData.address_1||d.address_1||(w.current.incompleteBilling=!0),(0,s.cartContainsSubscription)()&&p?C.current.addNotice((0,u.__)("Please select a shipping option then click Place Order to complete your payment.","woo-payment-gateway"),"info"):M(e.nonce)}))},createOrder:function(){return i.createPayment({flow:(0,s.cartContainsSubscription)()?"vault":"checkout",intent:t("intent"),currency:S.code,displayName:t("displayName"),amount:(0,s.removeNumberPrecision)(O.value,S.minorUnit),enableShippingAddress:_,shippingAddressEditable:_}).then((function(e){return e})).catch((function(e){console.log(e)}))},onCancel:function(){C.current.onClose()}};(0,s.cartContainsSubscription)()&&(m.createBillingAgreement=m.createOrder,delete m.createOrder),_&&!m.hasOwnProperty("createBillingAgreement")&&(m.onShippingChange=function(e,t){var n=e.shipping_address,r=e.selected_shipping_option,a=null==r?void 0:r.id,i=C.current.shippingData,c=i.shippingAddress,u=c.city,d=c.state,f=c.postcode,m=c.country,y=(0,p.getSelectedShippingOptionId)(C.current.shippingData.shippingRates),g={city:n.city,state:n.state,postcode:n.postal_code,country:n.country_code},b=null==a||a==y,h=(0,l.isEqual)({city:u,state:d,postcode:f,country:m},g)&&b;return a&&i.setSelectedRates.apply(i,(0,o.default)((0,s.extractSelectedShippingOption)(a))),i.setShippingAddress(v(v({},c),g)),new Promise((function(e){k(T(t,null==r?void 0:r.id,h,e),h)}))}),r.Buttons(m).isEligible()&&e.push(m)}return e}}),[r,i,_,T,k,M])};t.usePayPalOptions=y;var g=y;t.default=g},2569:function(e,t,n){var r=n(3027),a=n(5318),o=a(n(7154)),i=a(n(3038)),c=n(3027),u=n(4222),l=n(3446),s=n(9154),d=n(6723),p=n(89),f=n(5520),m=n(3636),v=(0,s.getSettings)("braintree_paypal"),y=function(e){var t=e.billing,n=e.shippingData,a=e.eventRegistration,u=e.emitResponse,y=e.onClick,g=e.onClose,b=t.currency,h=(0,p.usePaymentMethodDataContext)().notice,P=h.addNotice,O=(0,c.useState)(null),S=(0,i.default)(O,2),_=S[0],E=S[1],D=(0,c.useState)(!1),C=(0,i.default)(D,2),w=C[0],k=C[1],j=(0,c.useRef)();(0,m.useExpressBreakpointWidth)({breakpoint:375});var M=(0,f.useLoadPayPal)({paypalCheckoutInstance:_,currency:b.code,clientToken:(0,s.getClientToken)(),addNotice:P,intent:v("intent"),flow:(0,s.cartContainsSubscription)()?"vault":"checkout",partnerCode:v("partnerCode")}),N=(0,f.usePayPalOptions)({getData:v,addNotice:P,paypal:M,paypalCheckoutInstance:_,billing:t,shippingData:n,eventRegistration:a,emitResponse:u,onClick:y,onClose:g});(0,c.useState)((function(){(0,l.create)({authorization:(0,s.getClientToken)(),merchantAccountId:(0,s.getMerchantAccount)(b.code)}).then((function(e){E(e)})).catch((function(e){P(e)}))}),[]),(0,c.useEffect)((function(){M&&(M.Buttons.driver("react",{React:r,ReactDOM:ReactDOM}),j.current=M.Buttons.driver("react",{React:r,ReactDOM:ReactDOM}),k(!0))}),[M]);var x=j.current,A=w&&N?N.map((function(e){return r.createElement(x,(0,o.default)({key:e.fundingSource},e))})):null;return r.createElement(r.Fragment,null,(null==h?void 0:h.notice)&&r.createElement(d.Notice,{notice:h.notice,onRemove:h.removeNotice}),A)};(0,u.registerExpressPaymentMethod)({name:v("name"),canMakePayment:function(){return!0},content:r.createElement(d.PaymentMethod,{content:y,title:v("title"),description:v("description"),name:v("name"),icon:v("icon"),getData:v,isExpress:!0,advancedFraudOptions:{paypal:!0}}),edit:r.createElement(d.PaymentMethod,{content:y,getData:v}),supports:{showSavedCards:v("features").includes("tokenization"),showSaveOption:!0,features:v("features")}})},9154:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.cartContainsSubscription=t.canShowSavedCard=t.getCartTotalItem=t.extractAddressLines=t.extractFullName=t.getSelectedShippingOptionId=t.extractSelectedShippingOption=t.getShippingOptionId=t.formatPrice=t.deleteFromCache=t.getFromCache=t.storeInCache=t.BraintreeError=t.removeNumberPrecision=t.getErrorMessage=t.ensureErrorResponse=t.ensureSuccessResponse=t.canMakePayment=t.loadClient=t.getMerchantAccount=t.getClientToken=t.getSettings=void 0;var a=r(n(4575)),o=r(n(2205)),i=r(n(8585)),c=r(n(9754)),u=r(n(5957)),l=r(n(9713)),s=n(2492),d=n(1249),p=n(8419);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=(0,s.getSetting)("wcBraintreeData"),g=(0,s.getSetting)("wcBraintreeMessages"),b=/^([\w]+)\:(.+)$/;t.getSettings=function(e){return e="".concat(e,"_data"),function(t){return t?(0,s.getSetting)(e)[t]:(0,s.getSetting)(e)}},t.getClientToken=function(){return y.clientToken},t.getMerchantAccount=function(e){var t;return(null==y||null===(t=y.merchantAccounts)||void 0===t?void 0:t[e])?y.merchantAccounts[e]:null};var h=new Promise((function(e,t){(0,d.create)({authorization:y.clientToken},(function(n,r){n?t(n):e(r)}))}));t.loadClient=h,t.canMakePayment=function(){return new Promise((function(e,t){h.then((function(){return e(!0)})).catch((function(t){console.log("Error loading client: ",t),e({error:t})}))}))},t.ensureSuccessResponse=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v({type:e.SUCCESS},t)},t.ensureErrorResponse=function(e,t){return{type:e.ERROR,message:P(t)}};var P=function(e){var t=null==e?void 0:e.message;return"string"==typeof e?t=e:e.code&&g[e.code]&&(t=g[e.code]),t};t.getErrorMessage=P,t.removeNumberPrecision=function(e,t){return e/Math.pow(10,t)};var O=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);if(n){var a=(0,c.default)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,i.default)(this,e)});function u(e){var t;return(0,a.default)(this,u),(t=r.call(this,e.message)).error=e,t}return u}((0,u.default)(Error));t.BraintreeError=O;var S=function(e){return"".concat("wcBraintree:").concat(e)};t.storeInCache=function(e,t){var n=Math.floor((new Date).getTime()/1e3)+900;"sessionStorage"in window&&sessionStorage.setItem(S(e),JSON.stringify({value:t,exp:n}))},t.getFromCache=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("sessionStorage"in window)try{var n=JSON.parse(sessionStorage.getItem(S(e)));if(n){var r=n.value,a=n.exp;if(!(Math.floor((new Date).getTime()/1e3)>a))return r;_(S(e))}}catch(e){}return t};var _=function(e){"sessionStorage"in window&&sessionStorage.removeItem(S(e))};t.deleteFromCache=_,t.formatPrice=function(e,t){var n,r=(0,p.getCurrency)(t),a=r.prefix,o=r.suffix,i=r.decimalSeparator,c=r.minorUnit,u=r.thousandSeparator;if(""==e||void 0===e)return e;e="string"==typeof e?parseInt(e,10):e;var l="",s=(e=(e/=Math.pow(10,c)).toString().replace(".",i)).indexOf(i);if(s<0)c>0&&(e+="".concat(i).concat(new Array(c+1).join("0")));else{var d=e.substr(s+1);d.length<c&&(e+=new Array(c-d.length+1).join("0"))}var f=e.match(new RegExp("(\\d+)\\".concat(i,"(\\d+)")));return f&&(e=f[1],l=f[2]),e=e.replace(new RegExp("\\B(?=(\\d{3})+(?!\\d))","g"),"".concat(u)),a+(e=(null===(n=l)||void 0===n?void 0:n.length)>0?e+i+l:e)+o};var E=function(e,t){return"".concat(e,":").concat(t)};t.getShippingOptionId=E,t.extractSelectedShippingOption=function(e){var t=e.match(b);if(t){var n=t[1];return[t[2],n]}return[]},t.getSelectedShippingOptionId=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];return E(r,e[r])}},t.extractFullName=function(e){return[e.split(" ").slice(0,-1).join(" "),e.split(" ").pop()]},t.extractAddressLines=function(e){var t,n;return Array.isArray(e)&&(t=null==e?void 0:e[0],e.length>1&&(n=null==e?void 0:e[1])),{address_1:t,address_2:n}},t.getCartTotalItem=function(e,t){var n,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.key===e)return a.value}}catch(e){r.e(e)}finally{r.f()}return null},t.canShowSavedCard=function(){return!D()};var D=function(){return 1==(null==y?void 0:y.hasSubscription)};t.cartContainsSubscription=D},1517:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(8712);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}))},8712:function(e,t,n){var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.useHandleTokenization=void 0;var a=r(n(7015)),o=r(n(8926)),i=n(3027),c=n(89),u=function(e){var t=e.venmoInstance,n=e.onSubmit,r=(0,i.useRef)(null),u=(0,c.usePaymentMethodDataContext)(),l=u.onPaymentDataFilter,s=u.paymentMethodNonce,d=u.setPaymentMethodNonce,p=u.notice.addNotice,f=(0,i.useCallback)((0,o.default)(a.default.mark((function e(){var o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!s){e.next=5;break}n(),e.next=10;break;case 5:return e.next=7,t.tokenize();case 7:o=e.sent,r.current={nonce:o.nonce},d(o.nonce);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),p(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[t,n,s]);return(0,i.useEffect)((function(){var e=l((function(e,t){var n=t.name;return e.meta.paymentMethodData["".concat(n,"_nonce_key")]=r.current.nonce,e}),5);return function(){return e()}}),[l]),{handleClick:f}};t.useHandleTokenization=u;var l=u;t.default=l},272:function(e,t,n){var r=n(3027),a=n(5318)(n(3038)),o=n(6931),i=n(3027),c=n(3163),u=n(4222),l=n(6723),s=n(9154),d=n(89),p=n(1517),f=(0,s.getSettings)("braintree_venmo"),m=new Promise((function(e,t){(0,o.create)({authorization:(0,s.getClientToken)(),allowNewBrowserTab:!1}).then((function(t){return e(t)})).catch((function(e){return t(e)}))})),v=function(e){var t=e.onSubmit,n=(0,d.usePaymentMethodDataContext)().notice,o=(0,i.useState)(null),u=(0,a.default)(o,2),s=u[0],v=u[1],g=(0,p.useHandleTokenization)({venmoInstance:s,onSubmit:t}).handleClick;return(0,i.useEffect)((function(){m.then((function(e){return v(e)})).catch((function(e){return n.addNotice(e)}))}),[]),r.createElement(r.Fragment,null,(null==n?void 0:n.notice)&&r.createElement(l.Notice,{notice:n.notice,onRemove:n.removeNotice}),r.createElement("div",{className:"wc-braintree-blocks-venmo-button__container"},r.createElement("p",null,(0,c.__)("Complete your order with","woo-payment-gateway")),s&&r.createElement(y,{onClick:g,src:f("buttonIcon")})))},y=function(e){var t=e.onClick,n=e.src;return r.createElement("button",{className:"wc-braintree-blocks-venmo__button",onClick:t},r.createElement("img",{src:n}))};(0,u.registerPaymentMethod)({name:f("name"),label:r.createElement(l.PaymentMethodLabel,{title:f("title"),paymentMethod:f("name"),icon:f("icon")}),ariaLabel:(0,c.__)("Venmo","woo-payment-gateway"),placeOrderButtonLabel:f("placeOrderButtonLabel"),canMakePayment:function(){return new Promise((function(e,t){m.then((function(t){e(t.isBrowserSupported())})).catch((function(t){e(!1)}))}))},content:r.createElement(l.PaymentMethod,{content:v,title:f("title"),description:f("description"),name:f("name"),icon:f("icon"),getData:f}),savedTokenComponent:r.createElement(l.SavedTokenProvider,{getData:f,name:f("name"),vaultedThreeDSecure:f("vaultedThreeDSecure")}),edit:r.createElement(l.PaymentMethod,{content:v,getData:f}),supports:{showSavedCards:f("features").includes("tokenization"),showSaveOption:!1,features:f("features")}})},4184:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var i=a.apply(null,n);i&&e.push(i)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var c in n)r.call(n,c)&&n[c]&&e.push(c);else e.push(n.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},7884:function(){}}]);
//# sourceMappingURL=commons.js.map